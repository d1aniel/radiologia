<div class="mx-auto w-full max-w-[1000px] p-4 sm:p-6">
  <div class="mb-4 flex items-center justify-between">
    <h2 class="text-lg font-semibold text-slate-800">Modalidades</h2>

    <a routerLink="/modalities/create">
      <button
        pButton
        label="Nueva modalidad"
        icon="pi pi-plus"
        class="p-button-sm">
      </button>
    </a>
  </div>

  <ng-container *ngIf="modalidades$ | async as modalidades">
    <p-table
      [value]="modalidades"
      [rowTrackBy]="trackById"
      [tableStyle]="{ 'min-width': '720px' }"
      [rows]="10"
      [paginator]="true"
      [rowsPerPageOptions]="[5,10,20]"
      [responsiveLayout]="'scroll'"
      [loading]="loading$ | async"
      styleClass="text-sm">

      <ng-template pTemplate="header">
        <tr>
          <th class="w-[80px]">ID</th>
          <th>Nombre</th>
          <th>Descripción</th>
          <th class="w-[120px]">Activa</th>
          <th class="w-[220px] text-center">Acciones</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-row>
        <tr>
          <td class="text-slate-700">{{ row.id }}</td>
          <td class="font-medium">{{ row.nombre }}</td>
          <td class="text-slate-700">{{ row.descripcion }}</td>
          <td>
            <p-tag
              [severity]="actTag(row.activa).severity"
              [value]="actTag(row.activa).label">
            </p-tag>
          </td>
          <td class="flex gap-2 justify-center">
            
            <button
              pButton
              icon="pi pi-pencil"
              class="p-button-rounded p-button-text p-button-warning"
              [routerLink]="['/modalities/update', row.id]"
              pTooltip="Editar">
            </button>


            
            <button
              pButton
              icon="pi pi-trash"
              class="p-button-rounded p-button-text p-button-danger"
              (click)="deleteModalidad(row)"
              pTooltip="Eliminar físico">
            </button>

            
            <button
              *ngIf="row.activa"
              pButton
              icon="pi pi-ban"
              class="p-button-rounded p-button-text p-button-secondary"
              (click)="deleteModalidadAdv(row)"
              pTooltip="Marcar INACTIVA">
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </ng-container>
</div>

<p-confirmDialog></p-confirmDialog>
<p-toast></p-toast>
