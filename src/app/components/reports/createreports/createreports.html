<p-toast></p-toast>

<div class="mx-auto w-full max-w-[880px] rounded-xl bg-white p-4 sm:p-6 shadow-sm">
  <h2 class="mb-4 text-lg font-semibold text-slate-800">Crear Informe</h2>

  <form [formGroup]="form" (ngSubmit)="submit()" class="grid grid-cols-12 gap-3 text-sm">

    <!-- ESTUDIO -->
    <div class="col-span-12 md:col-span-6">
      <label class="block mb-1 text-sm font-medium text-slate-700">Estudio*</label>
     <p-select
        formControlName="estudio_id"
        [options]="estudios"
        optionLabel="label"
        optionValue="value"
        placeholder="Seleccione..."
        class="w-full">
      </p-select>

      <small class="block mt-1 text-xs text-red-600" *ngIf="getError('estudio_id')">
        {{ getError('estudio_id') }}
      </small>
    </div>

    <!-- MÉDICO -->
    <div class="col-span-12 md:col-span-6">
      <label class="block mb-1 text-sm font-medium text-slate-700">Médico*</label>
      <p-select
        formControlName="medico_id"
        [options]="medicos"
        optionLabel="label"
        optionValue="value"
        placeholder="Seleccione..."
        class="w-full">
      </p-select>
      <small class="block mt-1 text-xs text-red-600" *ngIf="getError('medico_id')">
        {{ getError('medico_id') }}
      </small>
    </div>

    <!-- ESTADO -->
    <div class="col-span-12 md:col-span-4">
      <label class="block mb-1 text-sm font-medium text-slate-700">Estado*</label>
      <p-select
        formControlName="estado"
        [options]="estadoOpts"
        optionLabel="label"
        optionValue="value"
        class="w-full">
      </p-select>
      <small class="block mt-1 text-xs text-red-600" *ngIf="getError('estado')">
        {{ getError('estado') }}
      </small>
    </div>

    <!-- CUERPO -->
    <div class="col-span-12">
      <label class="block mb-1 text-sm font-medium text-slate-700">Cuerpo*</label>
      <textarea
        formControlName="cuerpo"
        rows="8"
        placeholder="Escribe el informe..."
        class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring">
      </textarea>
      <small class="block mt-1 text-xs text-red-600" *ngIf="getError('cuerpo')">
        {{ getError('cuerpo') }}
      </small>
    </div>

    <!-- ACCIONES -->
    <div class="col-span-12 mt-2 flex gap-2 justify-end">
      <button
        pButton
        type="button"
        label="Cancelar"
        class="p-button-text"
        (click)="cancelar()">
      </button>

      <button
        pButton
        type="submit"
        label="Crear"
        icon="pi pi-check"
        [disabled]="loading">
      </button>
    </div>
  </form>
</div>
