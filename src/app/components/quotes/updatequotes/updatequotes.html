

<p-toast></p-toast>

<div class="mx-auto w-full max-w-[880px] rounded-xl bg-white p-4 sm:p-6 shadow-sm">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-lg font-semibold text-slate-800">
      Editar Cita
    </h2>

    <button
      pButton
      type="button"
      class="p-button p-component p-button-text"
      icon="pi pi-arrow-left"
      label="Volver"
      (click)="cancelar()">
    </button>
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()" class="grid grid-cols-12 gap-3 text-sm">
    
    <div class="col-span-12 md:col-span-6">
      <label class="block mb-1 text-sm font-medium text-slate-700">Paciente</label>
      <p-select
        formControlName="patient_id"
        [options]="patients"
        optionLabel="label"
        optionValue="value"
        placeholder="Seleccione..."
        class="w-full">
      </p-select>
      <small class="block mt-1 text-xs text-red-600" *ngIf="getError('patient_id')">
        {{ getError('patient_id') }}
      </small>
    </div>

    
    <div class="col-span-12 md:col-span-6">
      <label class="block mb-1 text-sm font-medium text-slate-700">Tecn√≥logo</label>
      <p-select
        formControlName="technologist_id"
        [options]="technologists"
        optionLabel="label"
        optionValue="value"
        placeholder="Seleccione..."
        class="w-full">
      </p-select>
      <small class="block mt-1 text-xs text-red-600" *ngIf="getError('technologist_id')">
        {{ getError('technologist_id') }}
      </small>
    </div>

    
    <div class="col-span-12 md:col-span-6">
      <label class="block mb-1 text-sm font-medium text-slate-700">Modalidad</label>
      <p-select
        formControlName="modalidad"
        [options]="modalities"
        optionLabel="label"
        optionValue="value"
        placeholder="Seleccione..."
        class="w-full">
      </p-select>
      <small class="block mt-1 text-xs text-red-600" *ngIf="getError('modalidad')">
        {{ getError('modalidad') }}
      </small>
    </div>

    
    <div class="col-span-12 md:col-span-6">
      <label class="block mb-1 text-sm font-medium text-slate-700">Equipo</label>
      <p-select
        formControlName="equipo"
        [options]="teams"
        optionLabel="label"
        optionValue="value"
        placeholder="Seleccione..."
        class="w-full">
      </p-select>
      <small class="block mt-1 text-xs text-red-600" *ngIf="getError('equipo')">
        {{ getError('equipo') }}
      </small>
    </div>

    
    <div class="col-span-12 md:col-span-6">
      <label class="block mb-1 text-sm font-medium text-slate-700">Fecha y hora</label>
      <p-datepicker
        formControlName="fechaHora"
        [showTime]="true"
        hourFormat="24"
        appendTo="body"
        inputId="fechaHora"
        class="w-full">
      </p-datepicker>
      <small class="block mt-1 text-xs text-red-600" *ngIf="getError('fechaHora')">
        {{ getError('fechaHora') }}
      </small>
    </div>

    
    <div class="col-span-12 md:col-span-6">
      <label class="block mb-1 text-sm font-medium text-slate-700">Estado</label>
      <p-select
        formControlName="estado"
        [options]="estadoOpts"
        optionLabel="label"
        optionValue="value"
        class="w-full">
      </p-select>
      <small class="block mt-1 text-xs text-red-600" *ngIf="getError('estado')">
        {{ getError('estado') }}
      </small>
    </div>

    
    <div class="col-span-12">
      <label class="block mb-1 text-sm font-medium text-slate-700">Motivo</label>
      <input
        pInputText
        formControlName="motivo"
        class="w-full px-3 py-2"
        placeholder="Describa el motivo de la cita" />
      <small class="block mt-1 text-xs text-red-600" *ngIf="getError('motivo')">
        {{ getError('motivo') }}
      </small>
    </div>

    
    <div class="col-span-12 flex justify-end gap-2 mt-4">
      <button
        pButton
        type="button"
        class="p-button-text"
        label="Cancelar"
        (click)="cancelar()">
      </button>

      <button
        pButton
        type="submit"
        label="Guardar cambios"
        [disabled]="loading || form.invalid">
      </button>
    </div>
  </form>
</div>
